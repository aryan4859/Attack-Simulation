<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Locker</title>
    <link rel="stylesheet" href="/css/main.css" />
  </head>
  <body>
    <main>
      <h1>Lockerr</h1>
      <hr />

      <h4>Your list:</h4>
      <div id="list"></div>
      <hr />

      <h4>Create a new entry:</h4>
      <form method="POST" action="/create" id="create">
        <input type="text" name="text" />
        <br />
        <input type="submit" value="create" />
      </form>
      <a href="/submit">Report bugs here</a>
    </main>

    <script nonce="{{nonce}}" src="/js/purify.js"></script>
    <script nonce="{{nonce}}">
      const $ = document.querySelector.bind(document); // imagine using
      jQuery... const entries = JSON.parse(decodeURIComponent("{{list}}"));
      entries.forEach((entry, i) => { // Create a blockquote element const
      blockquote = document.createElement("blockquote"); // Add the sanitized
      entry content const contentDiv =
      Object.assign(document.createElement("div"), { innerHTML:
      DOMPurify.sanitize(entry), }); blockquote.appendChild(contentDiv);
      blockquote.appendChild(document.createElement("br")); // Create a form for
      deleting the entry const form =
      Object.assign(document.createElement("form"), { method: "POST", action:
      "/remove", }); form.appendChild(
      Object.assign(document.createElement("input"), { type: "hidden", name:
      "index", value: i, }) ); form.appendChild(
      Object.assign(document.createElement("input"), { type: "submit", value:
      "delete", }) ); blockquote.appendChild(form); // Append the blockquote to
      the list $("#list").appendChild(blockquote); });

    </script>
  </body>
</html>